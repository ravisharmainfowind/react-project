{"ast":null,"code":"import _defineProperty from \"/opt/lampp/htdocs/react-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/opt/lampp/htdocs/react-dashboard-master/src/pages/register/Register.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Redirect, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Alert, Button, FormGroup, Input, Row, Col, Form } from 'reactstrap';\nimport s from './Register.module.scss';\nimport Widget from '../../components/Widget';\nimport Footer from \"../../components/Footer\";\nimport { registerUser } from '../../actions/user';\nimport jwt from 'jsonwebtoken';\nimport config from '../../config';\n\nclass Register extends React.Component {\n  static isAuthenticated(token) {\n    // We check if app runs with backend mode\n    if (!config.isBackend && token) return true;\n    if (!token) return;\n    const date = new Date().getTime() / 1000;\n    const data = jwt.decode(token);\n    console.log(data.exp);\n    return date < data.exp;\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleChange\", event => {\n      let input = this.state.input;\n      let errors = this.state.errors;\n      input[event.target.name] = event.target.value;\n      errors[event.target.name] = '';\n      this.setState({\n        input\n      });\n      console.log(this.state.input);\n    });\n\n    _defineProperty(this, \"doRegister\", e => {\n      e.preventDefault();\n\n      if (this.validate()) {\n        this.props.dispatch(registerUser({\n          email: this.state.login,\n          password: this.state.password\n        }));\n        e.preventDefault();\n      }\n    });\n\n    this.state = {\n      input: {\n        email: \"\",\n        name: \"\",\n        password: null,\n        confirmPassword: \"\"\n      },\n      errors: {},\n      successMessage: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n  }\n\n  validate() {\n    let input = this.state.input;\n    let errors = {};\n    let isValid = true; //console.log(input[\"profile_image\"].size);\n\n    if (!input[\"name\"]) {\n      isValid = false;\n      errors[\"name\"] = \"Please enter your name.\";\n    }\n\n    if (typeof input[\"name\"] !== \"undefined\") {\n      if (!input[\"name\"].match(/^[a-zA-Z]+$/)) {\n        isValid = false;\n        errors[\"name\"] = \"Only letters\";\n      }\n    }\n\n    if (!input[\"email\"]) {\n      isValid = false;\n      errors[\"email\"] = \"Please enter your email Address.\";\n    }\n\n    if (typeof input[\"email\"] !== \"undefined\") {\n      var pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\n\n      if (!pattern.test(input[\"email\"])) {\n        isValid = false;\n        errors[\"email\"] = \"Please enter valid email address.\";\n      }\n    }\n\n    if (!input[\"password\"]) {\n      isValid = false;\n      errors[\"password\"] = \"Please enter your password.\";\n    }\n\n    if (typeof input[\"password\"] != null || input[\"password\"] != undefined) {\n      var strongRegex = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})\");\n\n      if (!strongRegex.test(input[\"password\"])) {\n        isValid = false;\n        errors[\"password\"] = \"Use 8 or more characters with atleast minimum of a number, symbol lowercase and uppercase letter.\";\n      }\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return isValid;\n  }\n\n  render() {\n    const {\n      from\n    } = this.props.location.state || {\n      from: {\n        pathname: '/login'\n      }\n    };\n\n    if (this.props.isAuthenticated) {\n      // cant access login page while logged in\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: from,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: s.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: {\n        size: 10,\n        offset: 1\n      },\n      sm: {\n        size: 6,\n        offset: 3\n      },\n      lg: {\n        size: 4,\n        offset: 4\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, \"React Dashboard\"), /*#__PURE__*/React.createElement(Widget, {\n      className: s.widget,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mt-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, \"Register to your Web App\"), /*#__PURE__*/React.createElement(Form, {\n      className: \"mt\",\n      onSubmit: this.doRegister,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, this.props.errorMessage && /*#__PURE__*/React.createElement(Alert, {\n      size: \"sm\",\n      color: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, this.props.errorMessage), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      className: \"no-border\",\n      value: this.state.name,\n      onChange: this.handleChange,\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, this.state.errors.name)), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      className: \"no-border\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }, this.state.errors.email)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      className: \"no-border\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, this.state.errors.password)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      className: \"no-border\",\n      value: this.state.confirmPassword,\n      onChange: this.handleChange,\n      type: \"password\",\n      name: \"confirmPassword\",\n      placeholder: \"Confirm Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, this.state.errors.confirmPassword)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"fs-sm\",\n      color: \"default\",\n      size: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 23\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"success\",\n      size: \"sm\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }\n    }, this.props.isFetching ? 'Loading...' : 'Register'))))))), /*#__PURE__*/React.createElement(Footer, {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\n_defineProperty(Register, \"propTypes\", {\n  dispatch: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool,\n  isFetching: PropTypes.bool,\n  location: PropTypes.any,\n  // eslint-disable-line\n  errorMessage: PropTypes.string\n});\n\n_defineProperty(Register, \"defaultProps\", {\n  isAuthenticated: false,\n  isFetching: false,\n  location: {},\n  errorMessage: null\n});\n\nfunction mapStateToProps(state) {\n  return {\n    isFetching: state.auth.isFetching,\n    isAuthenticated: state.auth.isAuthenticated,\n    errorMessage: state.auth.errorMessage\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Register));","map":{"version":3,"sources":["/opt/lampp/htdocs/react-dashboard-master/src/pages/register/Register.js"],"names":["React","PropTypes","withRouter","Redirect","Link","connect","Alert","Button","FormGroup","Input","Row","Col","Form","s","Widget","Footer","registerUser","jwt","config","Register","Component","isAuthenticated","token","isBackend","date","Date","getTime","data","decode","console","log","exp","constructor","props","event","input","state","errors","target","name","value","setState","e","preventDefault","validate","dispatch","email","login","password","confirmPassword","successMessage","handleChange","bind","handleSubmit","isValid","match","pattern","RegExp","test","undefined","strongRegex","render","from","location","pathname","root","size","offset","widget","doRegister","errorMessage","isFetching","func","isRequired","bool","any","string","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Redirect,Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { \n  Alert, \n  Button, \n  FormGroup, \n  Input, \n  Row,\n  Col,\n  Form\n} from 'reactstrap';\nimport s from './Register.module.scss';\nimport Widget from '../../components/Widget';\nimport Footer from \"../../components/Footer\";\nimport { registerUser } from '../../actions/user';\nimport jwt from 'jsonwebtoken';\nimport config from '../../config'\n\n\nclass Register extends React.Component {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    isAuthenticated: PropTypes.bool,\n    isFetching: PropTypes.bool,\n    location: PropTypes.any, // eslint-disable-line\n    errorMessage: PropTypes.string,\n  };\n\n  static defaultProps = {\n    isAuthenticated: false,\n    isFetching: false,\n    location: {},\n    errorMessage: null,\n  };\n\n  static isAuthenticated(token) {\n    // We check if app runs with backend mode\n    if (!config.isBackend && token) return true;\n    if (!token) return;\n    const date = new Date().getTime() / 1000;\n    const data = jwt.decode(token);\n    console.log(data.exp);\n    return date < data.exp;\n    \n}\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      input: {\n          email : \"\",\n          name : \"\",\n          password : null,\n          confirmPassword: \"\"\n      },  \n      errors: {},\n      successMessage: '',\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange = (event) => {\n    let input = this.state.input;\n    let errors = this.state.errors;\n\n      input[event.target.name] = event.target.value;\n      errors[event.target.name] = '';\n      this.setState({\n        input\n      });\n      console.log(this.state.input)\n\n    }\n  \n    handleSubmit(event) {\n      event.preventDefault();\n    }   \n\n    doRegister = (e) => {\n      e.preventDefault();  \n    if (this.validate()) {   \n    this.props.dispatch(\n      registerUser({\n        email: this.state.login,\n        password: this.state.password,\n      }),\n    );\n    e.preventDefault();\n    }\n  }\n\n  validate() {\n\n    let input = this.state.input;\n    let errors = {};\n    let isValid = true;\n    //console.log(input[\"profile_image\"].size);\n    if (!input[\"name\"]) {\n      isValid = false;\n      errors[\"name\"] = \"Please enter your name.\";\n    }\n\n    if(typeof input[\"name\"] !== \"undefined\"){\n      if(!input[\"name\"].match(/^[a-zA-Z]+$/)){\n          isValid = false;\n         errors[\"name\"] = \"Only letters\";\n      }        \n   }\n\n    if (!input[\"email\"]) {\n      isValid = false;\n      errors[\"email\"] = \"Please enter your email Address.\";\n    }\n\n    if (typeof input[\"email\"] !== \"undefined\") {\n\n      var pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\n      if (!pattern.test(input[\"email\"])) {\n        isValid = false;\n        errors[\"email\"] = \"Please enter valid email address.\";\n      }\n    }\n\n    if (!input[\"password\"]) {\n      isValid = false;\n      errors[\"password\"] = \"Please enter your password.\";\n    }\n\n    if (typeof input[\"password\"] !=null || input[\"password\"] !=undefined) {\n      var strongRegex = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})\");\n          if (!strongRegex.test(input[\"password\"])) {\n          isValid = false;\n          errors[\"password\"] = \"Use 8 or more characters with atleast minimum of a number, symbol lowercase and uppercase letter.\";\n      }\n  }\n\n    this.setState({\n      errors: errors\n    });\n\n    return isValid;\n  }\n  render() {\n    const {from} = this.props.location.state || {\n      from: {pathname: '/login'},\n    };\n\n    if (this.props.isAuthenticated) {\n      // cant access login page while logged in\n      return <Redirect to={from} />;\n    }\n\n    return (\n      <div className={s.root}>\n      <Row>\n        <Col xs={{size: 10, offset: 1}} sm={{size: 6, offset: 3}} lg={{size:4, offset: 4}}>\n          <p className=\"text-center\">React Dashboard</p>\n          <Widget className={s.widget}>\n            <h4 className=\"mt-0\">Register to your Web App</h4>\n            \n            <Form className=\"mt\" onSubmit={this.doRegister}>\n              {this.props.errorMessage && (\n                <Alert size=\"sm\" color=\"danger\">\n                  {this.props.errorMessage}\n                </Alert>\n              )}\n              <FormGroup className=\"form-group\">\n                <Input\n                  className=\"no-border\"\n                  value={this.state.name}\n                  onChange={this.handleChange}\n                  type=\"text\"\n                  \n                  name=\"name\"\n                  placeholder=\"Name\"\n                />\n                <div className=\"text-danger\">{this.state.errors.name}</div>\n              </FormGroup>\n              <FormGroup className=\"form-group\">\n                <Input\n                  className=\"no-border\"\n                  value={this.state.email}\n                  onChange={this.handleChange}\n                  type=\"email\"\n                  \n                  name=\"email\"\n                  placeholder=\"Email\"\n                />\n                <div className=\"text-danger\">{this.state.errors.email}</div>\n              </FormGroup>\n              <FormGroup>\n                <Input\n                  className=\"no-border\"\n                  value={this.state.password}\n                  onChange={this.handleChange}\n                  type=\"password\"\n                  \n                  name=\"password\"\n                  placeholder=\"Password\"\n                />\n                <div className=\"text-danger\">{this.state.errors.password}</div>\n              </FormGroup>\n              <FormGroup>\n                <Input\n                  className=\"no-border\"\n                  value={this.state.confirmPassword}\n                  onChange={this.handleChange}\n                  type=\"password\"\n                  \n                  name=\"confirmPassword\"\n                  placeholder=\"Confirm Password\"\n                />\n                <div className=\"text-danger\">{this.state.errors.confirmPassword}</div>\n              </FormGroup>\n              <div className=\"d-flex justify-content-between align-items-center\">\n                {/* <a href=\"#\" className=\"fs-sm\">Trouble with account?</a> eslint-disable-line */}\n                <Link to=\"/login\">\n                      <a className=\"fs-sm\" color=\"default\" size=\"sm\">Login  \n                      </a>\n                  </Link>\n                <div>\n                  \n                  <Button color=\"success\" size=\"sm\" type=\"submit\">\n                    {this.props.isFetching ? 'Loading...' : 'Register'}\n                  </Button>\n                </div>\n              </div>\n            </Form>\n          </Widget>\n        </Col>\n      </Row>\n      <Footer className=\"text-center\" />\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n      isFetching: state.auth.isFetching,\n      isAuthenticated: state.auth.isAuthenticated,\n      errorMessage: state.auth.errorMessage,\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Register));"]},"metadata":{},"sourceType":"module"}