{"ast":null,"code":"import _defineProperty from \"/opt/lampp/htdocs/react-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/opt/lampp/htdocs/react-dashboard-master/src/pages/register/Register.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Redirect, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Alert, Button, FormGroup, Input, Row, Col, Form } from 'reactstrap';\nimport s from './Login.module.scss';\nimport Widget from '../../components/Widget';\nimport Footer from \"../../components/Footer\";\nimport { loginUser } from '../../actions/user';\nimport jwt from 'jsonwebtoken';\nimport config from '../../config';\n\nclass Register extends React.Component {\n  static isAuthenticated(token) {\n    // We check if app runs with backend mode\n    if (!config.isBackend && token) return true;\n    if (!token) return;\n    const date = new Date().getTime() / 1000;\n    const data = jwt.decode(token);\n    console.log(data.exp);\n    return date < data.exp;\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"changeLogin\", event => {\n      this.setState({\n        login: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"changePassword\", event => {\n      this.setState({\n        password: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"doLogin\", e => {\n      this.props.dispatch(loginUser({\n        email: this.state.login,\n        password: this.state.password\n      }));\n      e.preventDefault();\n    });\n\n    this.state = {\n      login: '',\n      password: ''\n    };\n  }\n\n  render() {\n    const {\n      from\n    } = this.props.location.state || {\n      from: {\n        pathname: '/app'\n      }\n    };\n\n    if (this.props.isAuthenticated) {\n      // cant access login page while logged in\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: from,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, \"register\");\n  }\n\n}\n\n_defineProperty(Register, \"propTypes\", {\n  dispatch: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool,\n  isFetching: PropTypes.bool,\n  location: PropTypes.any,\n  // eslint-disable-line\n  errorMessage: PropTypes.string\n});\n\n_defineProperty(Register, \"defaultProps\", {\n  isAuthenticated: false,\n  isFetching: false,\n  location: {},\n  errorMessage: null\n});\n\nexport default Register;","map":{"version":3,"sources":["/opt/lampp/htdocs/react-dashboard-master/src/pages/register/Register.js"],"names":["React","PropTypes","withRouter","Redirect","Link","connect","Alert","Button","FormGroup","Input","Row","Col","Form","s","Widget","Footer","loginUser","jwt","config","Register","Component","isAuthenticated","token","isBackend","date","Date","getTime","data","decode","console","log","exp","constructor","props","event","setState","login","target","value","password","e","dispatch","email","state","preventDefault","render","from","location","pathname","func","isRequired","bool","isFetching","any","errorMessage","string"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Redirect,Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { \n  Alert, \n  Button, \n  FormGroup, \n  Input, \n  Row,\n  Col,\n  Form\n} from 'reactstrap';\nimport s from './Login.module.scss';\nimport Widget from '../../components/Widget';\nimport Footer from \"../../components/Footer\";\nimport { loginUser } from '../../actions/user';\nimport jwt from 'jsonwebtoken';\nimport config from '../../config'\n\n\nclass Register extends React.Component {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    isAuthenticated: PropTypes.bool,\n    isFetching: PropTypes.bool,\n    location: PropTypes.any, // eslint-disable-line\n    errorMessage: PropTypes.string,\n  };\n\n  static defaultProps = {\n    isAuthenticated: false,\n    isFetching: false,\n    location: {},\n    errorMessage: null,\n  };\n\n  static isAuthenticated(token) {\n    // We check if app runs with backend mode\n    if (!config.isBackend && token) return true;\n    if (!token) return;\n    const date = new Date().getTime() / 1000;\n    const data = jwt.decode(token);\n    console.log(data.exp);\n    return date < data.exp;\n    \n}\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      login: '',\n      password: '',\n    };\n  }\n\n  changeLogin = (event) => {\n    this.setState({login: event.target.value});\n  }\n\n  changePassword = (event) => {\n    this.setState({password: event.target.value});\n  }\n\n  doLogin = (e) => {\n    this.props.dispatch(\n      loginUser({\n        email: this.state.login,\n        password: this.state.password,\n      }),\n    );\n    e.preventDefault();\n  }\n  render() {\n    const {from} = this.props.location.state || {\n      from: {pathname: '/app'},\n    };\n\n    if (this.props.isAuthenticated) {\n      // cant access login page while logged in\n      return <Redirect to={from} />;\n    }\n    \n    return (\n      <div>register</div>\n    );\n  }\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}